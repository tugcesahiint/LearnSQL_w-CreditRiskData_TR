<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SQL Öğrenme Platformu</title>
  <style>
    :root {
      --bg: #ffffff; --text: #222; --box: #f9f9f9;
      --border: #ccc; --primary: #3498db;
    }
    body.dark {
      --bg: #121212; --text: #eee; --box: #1e1e1e;
      --border: #444; --primary: #00b894;
    }
    body {
      margin: 0; display: flex; font-family: 'Segoe UI', sans-serif;
      background: var(--bg); color: var(--text);
    }
    .sidebar {
      width: 30%; background: var(--box); padding: 20px;
      border-right: 1px solid var(--border); height: 100vh;
      overflow-y: auto; position: sticky; top: 0;
    }
    .main {
      flex: 1; padding: 20px;
    }
    .sticky-top {
      position: sticky; top: 0; z-index: 1000;
      background: var(--bg); padding: 10px 0; border-bottom: 1px solid var(--border);
    }
    .header {
      font-size: 24px; font-weight: bold; margin-bottom: 10px;
    }
    .level-buttons {
      display: flex; gap: 10px; margin-bottom: 10px;
    }
    .level-buttons button {
      flex: 1;
      padding: 10px; font-weight: bold;
      border: none; border-radius: 25px;
      cursor: pointer; background: transparent;
      border: 2px solid var(--primary); color: var(--primary);
      transition: 0.3s;
    }
    .level-buttons button:hover {
      background: var(--primary); color: white;
    }
    .theme-toggle {
      position: absolute; top: 20px; right: 20px;
      background: none; border: 2px solid var(--primary);
      color: var(--primary); padding: 6px 10px; border-radius: 20px;
      cursor: pointer; font-weight: bold;
    }
    .score {
      font-size: 18px; margin-top: 10px;
    }
    .code-block {
      background: #272822; color: #f8f8f2;
      padding: 12px; border-radius: 6px;
      font-family: monospace; white-space: pre-wrap;
      overflow-x: auto; margin: 10px 0;
    }
    textarea {
  background: #1e1e1e;
  color: #f8f8f2;
  font-family: 'Courier New', monospace;
  box-shadow: inset 0 0 5px #000;
  border: 1px solid var(--border);

      width: 100%; padding: 8px;
      font-family: monospace; font-size: 14px;
      background: var(--box); color: var(--text);
      border: 1px solid var(--border); border-radius: 4px;
    }
    button.check {
      margin-top: 8px; background: var(--primary); color: white;
      padding: 6px 12px; border: none; border-radius: 4px;
    }
    .correct { color: limegreen; font-weight: bold; margin-left: 10px; }
    .wrong { color: red; font-weight: bold; margin-left: 10px; }
    table {
      border-collapse: collapse; width: 100%;
      font-size: 13px; margin-bottom: 20px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 6px; text-align: left;
    }
    th {
      background-color: var(--primary); color: white;
    }
    .table-scroll {
  overflow-x: auto;
  max-width: 100%;
 overflow-x: auto; }
  </style>
</head>
<body>
<div class="theme-toggle" style="z-index:9999;" onclick="toggleTheme()">🌙/☀️</div>

<div class="sidebar">
  <h2>📁 Tablolar</h2>
  <div class="table-scroll">
    <h4>customers</h4>
    <div class="table-scroll"><table><tr><th>customer_id</th><th>name</th><th>income</th><th>credit_score</th><th>city</th><th>birth_year</th><th>marital_status</th><th>job_title</th></tr>
      <tr><td>1</td><td>Ahmet Yilmaz</td><td>5000</td><td>650</td><td>Istanbul</td><td>1985</td><td>married</td><td>Engineer</td></tr>
      <tr><td>2</td><td>Ayse Demir</td><td>8000</td><td>720</td><td>Ankara</td><td>1990</td><td>single</td><td>Doctor</td></tr>
      <tr><td>3</td><td>Can Kaya</td><td>3000</td><td>580</td><td>Izmir</td><td>1995</td><td>single</td><td>Student</td></tr>
    </table></div>
    <h4>loans</h4>
    <table><tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr>
      <tr><td>1</td><td>1</td><td>10000</td><td>paid</td></tr>
      <tr><td>2</td><td>2</td><td>15000</td><td>unpaid</td></tr>
    </table>
    <h4>defaults</h4>
    <table><tr><th>default_id</th><th>customer_id</th><th>reason</th></tr>
      <tr><td>1</td><td>2</td><td>missed payments</td></tr>
    </table>
    <h4>payments</h4>
    <table><tr><th>payment_id</th><th>loan_id</th><th>amount_paid</th></tr>
      <tr><td>1</td><td>1</td><td>3000</td></tr>
    </table>
  </div>
</div>

<div class="main">
  <div class="sticky-top">
    <div class="header">📊 SQL Öğrenme Platformu</div>
    <div class="level-buttons">
      <button onclick="loadLevel('temel')">🟢 Temel</button>
      <button onclick="loadLevel('orta')">🟡 Orta</button>
      <button onclick="loadLevel('ileri')">🔴 İleri</button>
    </div>
    <div class="score">✅ Doğru Sayısı: <span id="score">0</span></div>
  </div>
  <div id="questions" style="margin-top: 20px;"></div>
</div>

<script>
const allQuestions = {
  "temel": [
    {
      "title": "1. SELECT ile Sütun Seçimi",
      "explanation": "`SELECT` komutu, tabloda görmek istediğimiz sütunları seçmemizi sağlar.",
      "example": "SELECT name, income FROM customers;",
      "question": "customers tablosundaki tüm isimleri ve gelir bilgilerini listeleyin.",
      "answer": "SELECT name, income FROM customers;",
      "output": "<table><tr><th>name</th><th>income</th></tr><tr><td>Ahmet Yilmaz</td><td>5000</td></tr><tr><td>Ayse Demir</td><td>8000</td></tr><tr><td>Can Kaya</td><td>3000</td></tr></table>"
    },
    {
      "title": "2. FROM ile Tablo Belirtme",
      "explanation": "`FROM` ifadesi, verinin hangi tablodan alınacağını belirtir. Genellikle `SELECT` ifadesinden sonra gelir.",
      "example": "SELECT * FROM customers;",
      "question": "customers tablosundaki tüm verileri çekin.",
      "answer": "SELECT * FROM customers;",
      "output": "<table><tr><th>customer_id</th><th>name</th><th>income</th><th>credit_score</th></tr><tr><td>1</td><td>Ahmet Yilmaz</td><td>5000</td><td>650</td></tr></table>"
    },
    {
      "title": "3. WHERE ile Şartlı Seçim",
      "explanation": "`WHERE` ifadesi ile belirli koşulları sağlayan satırlar filtrelenir.",
      "example": "SELECT name FROM customers WHERE income > 4000;",
      "question": "Geliri 5000’den fazla olan müşterilerin adlarını listeleyin.",
      "answer": "SELECT name FROM customers WHERE income > 5000;",
      "output": "<table><tr><th>name</th></tr><tr><td>Ayse Demir</td></tr></table>"
    },
    {
      "title": "4. ORDER BY ile Sıralama",
      "explanation": "`ORDER BY` komutu, sonuçları bir veya daha fazla sütuna göre sıralar.",
      "example": "SELECT name FROM customers ORDER BY income ASC;",
      "question": "customers tablosunu doğum yılına göre artan şekilde sıralayın.",
      "answer": "SELECT * FROM customers ORDER BY birth_year ASC;",
      "output": "<table><tr><th>name</th><th>birth_year</th></tr><tr><td>Ahmet Yilmaz</td><td>1985</td></tr><tr><td>Ayse Demir</td><td>1990</td></tr><tr><td>Can Kaya</td><td>1995</td></tr></table>"
    },
  {
    "title": "5. LIMIT ile Kayıt Sınırlandırma",
    "explanation": "`LIMIT` komutu, dönen veri sayısını sınırlandırmak için kullanılır.",
    "example": "SELECT * FROM customers LIMIT 2;",
    "question": "customers tablosundan sadece ilk müşteriyi çekin.",
    "answer": "SELECT * FROM customers LIMIT 1;",
    "output": "<table><tr><th>customer_id</th><th>name</th></tr><tr><td>1</td><td>Ahmet Yilmaz</td></tr></table>"
  },
  {
    "title": "6. DISTINCT ile Tekil Değerler",
    "explanation": "`DISTINCT`, sadece birbirinden farklı değerleri listeler.",
    "example": "SELECT DISTINCT city FROM customers;",
    "question": "customers tablosundaki benzersiz şehirleri listeleyin.",
    "answer": "SELECT DISTINCT city FROM customers;",
    "output": "<table><tr><th>city</th></tr><tr><td>Istanbul</td></tr><tr><td>Ankara</td></tr><tr><td>Izmir</td></tr></table>"
  },
  {
    "title": "7. AS ile Takma Ad Verme",
    "explanation": "`AS`, sütunlara geçici takma ad vermek için kullanılır.",
    "example": "SELECT name AS isim, income AS gelir FROM customers;",
    "question": "income sütununa 'gelir' takma adını vererek listeleyin.",
    "answer": "SELECT income AS gelir FROM customers;",
    "output": "<table><tr><th>gelir</th></tr><tr><td>5000</td></tr><tr><td>8000</td></tr><tr><td>3000</td></tr></table>"
  },
  {
    "title": "8. Temel Matematik İşlemleri",
    "explanation": "SQL'de aritmetik işlemler yapılabilir: +, -, *, /, %",
    "example": "SELECT income, income * 12 AS yillik_gelir FROM customers;",
    "question": "income değerlerini 12 ile çarpıp 'yillik_gelir' olarak listeleyin.",
    "answer": "SELECT income * 12 AS yillik_gelir FROM customers;",
    "output": "<table><tr><th>yillik_gelir</th></tr><tr><td>60000</td></tr><tr><td>96000</td></tr><tr><td>36000</td></tr></table>"
  },
  {
    "title": "9. NULL ve IS NULL",
    "explanation": "`NULL` boş değerleri temsil eder. `IS NULL` ve `IS NOT NULL` ile kontrol edilir.",
    "example": "SELECT * FROM customers WHERE job_title IS NULL;",
    "question": "job_title bilgisi olmayan müşterileri listeleyin.",
    "answer": "SELECT * FROM customers WHERE job_title IS NULL;",
    "output": "<table><tr><th>customer_id</th><th>name</th><th>job_title</th></tr></table>"
  }
  ],
  "orta": [
    {
      "title": "1. JOIN ile Tablo Birle\u015ftirme",
      "explanation": "`JOIN`, iki tabloyu ortak s\u00fctun \u00fczerinden birle\u015ftirmek i\u00e7in kullan\u0131l\u0131r. `INNER JOIN` yaln\u0131zca e\u015fle\u015fen kay\u0131tlar\u0131 getirir.",
      "example": "SELECT name, amount FROM customers JOIN loans ON customers.customer_id = loans.customer_id;",
      "question": "customers ve loans tablolar\u0131n\u0131 birle\u015ftirip m\u00fc\u015fteri adlar\u0131n\u0131 ve kredi miktarlar\u0131n\u0131 listeleyin.",
      "answer": "SELECT name, amount FROM customers JOIN loans ON customers.customer_id = loans.customer_id;",
      "output": "<table><tr><th>name</th><th>amount</th></tr><tr><td>Ahmet Yilmaz</td><td>10000</td></tr><tr><td>Ayse Demir</td><td>15000</td></tr></table>"
    },
    {
      "title": "2. GROUP BY ile Gruplama",
      "explanation": "`GROUP BY` ile belirli bir s\u00fctuna g\u00f6re verileri gruplayabiliriz. Genellikle COUNT, SUM gibi fonksiyonlarla birlikte kullan\u0131l\u0131r.",
      "example": "SELECT city, COUNT(*) FROM customers GROUP BY city;",
      "question": "Her \u015fehirde ka\u00e7 m\u00fc\u015fteri oldu\u011funu listeleyin.",
      "answer": "SELECT city, COUNT(*) FROM customers GROUP BY city;",
      "output": "<table><tr><th>city</th><th>COUNT(*)</th></tr><tr><td>Istanbul</td><td>1</td></tr><tr><td>Ankara</td><td>1</td></tr><tr><td>Izmir</td><td>1</td></tr></table>"
    },
    {
      "title": "3. IN, BETWEEN, LIKE ile Geli\u015fmi\u015f Filtreleme",
      "explanation": "`IN` belirli bir listede olanlar\u0131 se\u00e7er. `BETWEEN` iki de\u011fer aras\u0131 i\u00e7in kullan\u0131l\u0131r. `LIKE` benzer metinleri e\u015fle\u015ftirir.",
      "example": "SELECT * FROM customers WHERE name LIKE 'A%';",
      "question": "Ad\u0131 'A' harfiyle ba\u015flayan m\u00fc\u015fterileri listeleyin.",
      "answer": "SELECT name FROM customers WHERE name LIKE 'A%';",
      "output": "<table><tr><th>name</th></tr><tr><td>Ahmet Yilmaz</td></tr><tr><td>Ayse Demir</td></tr></table>"
    }
  ],
  "ileri": [
    {
      "title": "1. WINDOW FUNCTION - ROW_NUMBER",
      "explanation": "`ROW_NUMBER()` her sat\u0131ra s\u0131ral\u0131 bir numara verir. Genellikle bir s\u0131ralama \u00f6l\u00e7\u00fct\u00fc ile birlikte kullan\u0131l\u0131r.",
      "example": "SELECT name, ROW_NUMBER() OVER (ORDER BY income DESC) FROM customers;",
      "question": "Gelire g\u00f6re azalan s\u0131ralamada her m\u00fc\u015fteriye s\u0131ra numaras\u0131 verin.",
      "answer": "SELECT name, ROW_NUMBER() OVER (ORDER BY income DESC) FROM customers;",
      "output": "<table><tr><th>name</th><th>row_number</th></tr><tr><td>Ayse Demir</td><td>1</td></tr><tr><td>Ahmet Yilmaz</td><td>2</td></tr><tr><td>Can Kaya</td><td>3</td></tr></table>"
    },
    {
      "title": "2. EXISTS ile Alt Sorgular",
      "explanation": "`EXISTS`, alt sorguda en az bir kay\u0131t varsa `TRUE` d\u00f6ner. Belirli bir ko\u015fula ba\u011fl\u0131 kontrol sa\u011flar.",
      "example": "SELECT name FROM customers WHERE EXISTS (SELECT * FROM loans WHERE customers.customer_id = loans.customer_id);",
      "question": "Herhangi bir kredisi olan m\u00fc\u015fterileri listeleyin.",
      "answer": "SELECT name FROM customers WHERE EXISTS (SELECT * FROM loans WHERE customers.customer_id = loans.customer_id);",
      "output": "<table><tr><th>name</th></tr><tr><td>Ahmet Yilmaz</td></tr><tr><td>Ayse Demir</td></tr></table>"
    },
    {
      "title": "3. CTE - Ge\u00e7ici Tablo (WITH)",
      "explanation": "`WITH` ifadesi, ge\u00e7ici bir adland\u0131r\u0131lm\u0131\u015f tablo olu\u015fturarak okunabilirli\u011fi art\u0131r\u0131r. Karma\u015f\u0131k sorgular bu \u015fekilde sadele\u015fir.",
      "example": "WITH high_income AS (SELECT * FROM customers WHERE income > 6000) SELECT name FROM high_income;",
      "question": "Geliri 6000'den y\u00fcksek olanlar\u0131 WITH ifadesiyle se\u00e7ip sadece adlar\u0131n\u0131 listeleyin.",
      "answer": "WITH high_income AS (SELECT * FROM customers WHERE income > 6000) SELECT name FROM high_income;",
      "output": "<table><tr><th>name</th></tr><tr><td>Ayse Demir</td></tr></table>"
    }
  ]
};

let score = 0;

function loadLevel(level) {
  const qDiv = document.getElementById("questions");
  qDiv.innerHTML = "";
  score = 0;
  document.getElementById("score").innerText = score;

  const questions = allQuestions[level];

  questions.forEach((q, i) => {
    const container = document.createElement("div");
    container.innerHTML = `
      <h3>${q.title}</h3>
      <p><strong>Konu:</strong> ${q.explanation}</p>
      <p><strong>Örnek:</strong></p>
      <pre class="code-block">${q.example}</pre>
      <p><strong>Soru:</strong> ${q.question}</p>
      <textarea id="answer-${i}"></textarea>
      <button class="check" onclick="checkAnswer('${level}', ${i})">Cevabı Kontrol Et</button>
      <span id="result-${i}"></span>
      <div id="output-${i}"></div>
      <hr>
    `;
    qDiv.appendChild(container);
  });
}

function checkAnswer(level, i) {
  const input = document.getElementById(`answer-${i}`).value.trim().toUpperCase();
  const correct = allQuestions[level][i].answer.trim().toUpperCase();
  const resultSpan = document.getElementById(`result-${i}`);
  const outputDiv = document.getElementById(`output-${i}`);

  if (input === correct) {
    resultSpan.innerText = '✔️';
    resultSpan.className = 'correct';
    outputDiv.innerHTML = `<p><strong>✔️ Doğru! Beklenen Sonuç:</strong></p>${allQuestions[level][i].output}`;
    score++;
    document.getElementById("score").innerText = score;
  } else {
    resultSpan.innerText = '❌';
    resultSpan.className = 'wrong';
    outputDiv.innerHTML = '';
  }
}

function toggleTheme() {
  document.body.classList.toggle("dark");
}

window.onload = () => loadLevel('temel');
</script>
</body>
</html>

