<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kredi Riski Verileriyle UygulamalÄ± SQL - TuÄŸÃ§e Åahin</title>
  <style>
    :root {
      --bg: #ffffff; --text: #222; --box: #f9f9f9;
      --border: #ccc; --primary: #3498db;
    }
    body.dark {
      --bg: #121212; --text: #eee; --box: #1e1e1e;
      --border: #444; --primary: #00b894;
    }
    body {
      margin: 0; display: flex; font-family: 'Segoe UI', sans-serif;
      background: var(--bg); color: var(--text);
    }
    .level-buttons button.active {
      background-color: var(--primary);
      color: white;
      font-weight: bold;
      border-radius: 6px;
    }
    .sidebar {
      width: 30%; background: var(--box); padding: 20px;
      border-right: 1px solid var(--border); height: 100vh;
      overflow-y: auto; position: sticky; top: 0;
    }
    .main {
      flex: 1; padding: 20px;
    }
    .sticky-top {
      position: sticky; top: 0; z-index: 1000;
      background: var(--bg); padding: 10px 0; border-bottom: 1px solid var(--border);
    }
    .header {
      font-size: 24px; font-weight: bold; margin-bottom: 10px;
    }
    .level-buttons {
      display: flex; gap: 10px; margin-bottom: 10px;
    }
    .level-buttons button {
      flex: 1;
      padding: 10px; font-weight: bold;
      border: none; border-radius: 25px;
      cursor: pointer; background: transparent;
      border: 2px solid var(--primary); color: var(--primary);
      transition: 0.3s;
    }
    .level-buttons button:hover {
      background: var(--primary); color: white;
    }
    .theme-toggle {
      position: absolute; top: 20px; right: 20px;
      background: none; border: 2px solid var(--primary);
      color: var(--primary); padding: 6px 10px; border-radius: 20px;
      cursor: pointer; font-weight: bold;
    }
    .score {
      font-size: 18px; margin-top: 10px;
    }
    .code-block {
      background: #272822; color: #f8f8f2;
      padding: 12px; border-radius: 6px;
      font-family: monospace; white-space: pre-wrap;
      overflow-x: auto; margin: 10px 0;
    }
    textarea {
  background: #1e1e1e;
  color: #f8f8f2;
  font-family: 'Courier New', monospace;
  box-shadow: inset 0 0 5px #000;
  border: 1px solid var(--border);

      width: 100%; padding: 8px;
      font-family: monospace; font-size: 14px;
      background: var(--box); color: var(--text);
      border: 1px solid var(--border); border-radius: 4px;
    }
    button.check {
      margin-top: 8px; background: var(--primary); color: white;
      padding: 6px 12px; border: none; border-radius: 4px;
    }
    .correct { color: limegreen; font-weight: bold; margin-left: 10px; }
    .wrong { color: red; font-weight: bold; margin-left: 10px; }
    table {
      border-collapse: collapse; width: 100%;
      font-size: 13px; margin-bottom: 20px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 6px; text-align: left;
    }
    th {
      background-color: var(--primary); color: white;
    }
    .table-scroll {
  overflow-x: auto;
  max-width: 100%;
 overflow-x: auto; }
  </style>
</head>
<body>
<div class="theme-toggle" style="z-index:9999;" onclick="toggleTheme()">ğŸŒ™/â˜€ï¸</div>

<div class="sidebar" style="font-size: 11px;">
  <h2 style="font-size: 14px;">ğŸ“ Tablolar</h2>
  <div class="table-scroll">
  
    <h4>customers</h4>
    <div class="table-scroll" style="overflow-x: auto;">
      <table style="font-size: 10px;">
        <tr><th>customer_id</th><th>name</th><th>income</th><th>credit_score</th><th>city</th><th>birth_year</th><th>marital_status</th><th>job_title</th></tr>
        <tr><td>1</td><td>Ahmet Yilmaz</td><td>5000</td><td>650</td><td>Istanbul</td><td>1985</td><td>married</td><td>Engineer</td></tr>
        <tr><td>2</td><td>Ayse Demir</td><td>8000</td><td>720</td><td>Ankara</td><td>1990</td><td>single</td><td>Doctor</td></tr>
        <tr><td>3</td><td>Can Kaya</td><td>3000</td><td>580</td><td>Izmir</td><td>1995</td><td>single</td><td>Student</td></tr>
      </table>
    </div>

    <h4>loans</h4>
    <table style="font-size: 10px;">
      <tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr>
      <tr><td>1</td><td>1</td><td>10000</td><td>paid</td></tr>
      <tr><td>2</td><td>2</td><td>15000</td><td>unpaid</td></tr>
    </table>

    <h4>defaults</h4>
    <table style="font-size: 10px;">
      <tr><th>default_id</th><th>customer_id</th><th>reason</th></tr>
      <tr><td>1</td><td>2</td><td>missed payments</td></tr>
    </table>

    <h4>payments</h4>
    <table style="font-size: 10px;">
      <tr><th>payment_id</th><th>loan_id</th><th>amount_paid</th></tr>
      <tr><td>1</td><td>1</td><td>3000</td></tr>
    </table>

  </div>
</div>
<div class="main">
  <div class="sticky-top">
    <div class="header">ğŸ“Š Kredi Riski Verileriyle UygulamalÄ± SQL - TuÄŸÃ§e Åahin</div>
    <div class="level-buttons">
      <button onclick="loadLevel('merhaba', this)">ğŸ‘‹ Merhaba</button>
      <button onclick="loadLevel('temel', this)">ğŸŸ¢ Temel</button>
      <button onclick="loadLevel('orta', this)">ğŸŸ¡ Orta</button>
      <button onclick="loadLevel('ileri', this)">ğŸ”´ Ä°leri</button>
    </div>
    <div class="score">âœ… DoÄŸru SayÄ±sÄ±: <span id="score">0</span></div>
  </div>
  <div id="questions" style="margin-top: 20px;"></div>
</div>

<script>
const allQuestions = {
  "merhaba": [
  {
    "title": "ğŸ‘‹ Merhaba, Ben TuÄŸÃ§e!",
    "explanation": "Bu proje, SQLâ€™i uygulamalÄ± olarak Ã¶ÄŸrenmek isteyenler iÃ§in Ã¶zel olarak hazÄ±rlandÄ±. GerÃ§ek banka verilerine benzer tablolarla, interaktif ve seviyelendirilmiÅŸ sorularla ilerleyebilirsin. KÃ¼Ã§Ã¼k yazÄ±m hatalarÄ± cevaplarda etkili olabilir, bu nedenle dikkatli olmanÄ± Ã¶neririm. Bu Ã¶zelliÄŸi zamanla daha esnek hale getirmeyi planlÄ±yorum.",
    "example": "ğŸ“˜ Ä°Ã§erik seviyeleri:\n- ğŸŸ¢ Temel: SELECT, WHERE, ORDER BY gibi komutlarÄ± Ã¶ÄŸrenirsin.\n- ğŸŸ¡ Orta: JOIN, GROUP BY, LIKE gibi konulara geÃ§ilir.\n- ğŸ”´ Ä°leri: CTE, WINDOW FUNCTIONS gibi analizsel SQL konularÄ± iÅŸlenir.",
    "question": "<strong>NasÄ±l KullanÄ±lÄ±r?</strong><br>YukarÄ±dan bir seviye seÃ§in. AÃ§Ä±lan sorularÄ±n Ã¶rneklerini inceleyin, SQL cevabÄ±nÄ±zÄ± yazÄ±n ve 'CevabÄ± Kontrol Et' tuÅŸuna basÄ±n.",
    "answer": "",
    "output": "<p><strong>ğŸ“© LinkedIn Ã¼zerinden bana ulaÅŸmak iÃ§in:</strong> <a href='https://www.linkedin.com/in/tugcesahin' target='_blank'>tugcesahin</a></p>"
  }
],
  "temel": [
    {
  "title": "1.1. SELECT * ile TÃ¼m SÃ¼tunlarÄ± Ã‡ekme",
  "explanation": "`SELECT *` komutu, bir tablodaki tÃ¼m sÃ¼tunlarÄ± ve satÄ±rlarÄ± getirir. Tablonun yapÄ±sÄ±nÄ± tanÄ±mak veya tÃ¼m veriyi gÃ¶rmek istediÄŸimizde kullanÄ±lÄ±r.",
  "example": "SELECT * FROM customers; -- Bu sorgu customers tablosundaki tÃ¼m satÄ±r ve sÃ¼tunlarÄ± getirir.",
  "question": "defaults tablosundaki tÃ¼m sÃ¼tunlarÄ± ve satÄ±rlarÄ± getiren sorguyu yazÄ±n.",
  "answer": "SELECT * FROM defaults;",
  "output": "<table><tr><th>default_id</th><th>customer_id</th><th>reason</th></tr><tr><td>1</td><td>2</td><td>missed payments</td></tr></table>"
},
  {
  "title": "1.2. Belirli SÃ¼tunlarÄ± Ã‡ekmek",
  "explanation": "`SELECT sÃ¼tun1, sÃ¼tun2` ÅŸeklinde kullanarak sadece ihtiyacÄ±nÄ±z olan bilgileri alabilirsiniz. Bu, gereksiz verileri elemine eder.",
  "example": "SELECT name, city FROM customers; -- Sadece mÃ¼ÅŸteri adlarÄ± ve ÅŸehirleri gelir.",
  "question": "loans tablosundan yalnÄ±zca kredi numarasÄ± (loan_id) ve durum (status) sÃ¼tunlarÄ±nÄ± Ã§ekin.",
  "answer": "SELECT loan_id, status FROM loans;",
  "output": "<table><tr><th>loan_id</th><th>status</th></tr><tr><td>1</td><td>paid</td></tr><tr><td>2</td><td>unpaid</td></tr></table>"
},
    {
  "title": "1.3. SELECT AS ile Takma Ad (Alias) Kullanmak",
  "explanation": "`AS` komutu sÃ¼tunlara geÃ§ici takma adlar verir. Raporlar veya kullanÄ±cÄ± dostu Ã§Ä±ktÄ±lar hazÄ±rlamak iÃ§in kullanÄ±lÄ±r.",
  "example": "SELECT income AS gelir, city AS sehir FROM customers;",
  "question": "payments tablosundaki `amount_paid` sÃ¼tununu 'odenen_tutar' adÄ±yla listeleyin.",
  "answer": "SELECT amount_paid AS odenen_tutar FROM payments;",
  "output": "<table><tr><th>odenen_tutar</th></tr><tr><td>3000</td></tr></table>"
},
  {
  "title": "1.4. SELECT ile Matematiksel Ä°ÅŸlemler",
  "explanation": "SayÄ±larla Ã§alÄ±ÅŸan sÃ¼tunlar Ã¼zerinde toplama (+), Ã§Ä±karma (-), Ã§arpma (*), bÃ¶lme (/) gibi iÅŸlemler yapabilirsiniz.",
  "example": "SELECT income, income * 12 AS yillik_gelir FROM customers;",
  "question": "loans tablosundaki `amount` deÄŸerlerinin yarÄ±sÄ±nÄ± (amount / 2) hesaplayÄ±p 'yarisi' takma adÄ±yla listeleyin.",
  "answer": "SELECT amount / 2 AS yarisi FROM loans;",
  "output": "<table><tr><th>yarisi</th></tr><tr><td>5000</td></tr><tr><td>7500</td></tr></table>"
},
    {
  "title": "1.5. SELECT DISTINCT ile Tekil DeÄŸerleri Almak",
  "explanation": "`DISTINCT` ifadesi aynÄ± deÄŸere sahip satÄ±rlarÄ± eleyerek her benzersiz (eÅŸsiz) deÄŸeri yalnÄ±zca bir kez getirir.",
  "example": "SELECT DISTINCT city FROM customers;",
  "question": "customers tablosundaki tekil medeni durumlarÄ± (`marital_status`) listeleyen sorguyu yazÄ±n.",
  "answer": "SELECT DISTINCT marital_status FROM customers;",
  "output": "<table><tr><th>marital_status</th></tr><tr><td>married</td></tr><tr><td>single</td></tr></table>"
},
{
  "title": "2.1. FROM ile Tabloyu Belirtmek",
  "explanation": "`FROM` ifadesi, verinin hangi tablodan Ã§ekileceÄŸini belirtir. `SELECT` komutunun hangi kaynakla Ã§alÄ±ÅŸacaÄŸÄ±nÄ± belirlemek iÃ§in kullanÄ±lÄ±r.",
  "example": "SELECT income FROM customers; -- customers tablosundan income sÃ¼tunu alÄ±nÄ±r.",
  "question": "defaults tablosundaki tÃ¼m verileri getiren SQL sorgusunu yazÄ±n.",
  "answer": "SELECT * FROM defaults;",
  "output": "<table><tr><th>default_id</th><th>customer_id</th><th>reason</th></tr><tr><td>1</td><td>2</td><td>missed payments</td></tr></table>"
},
    {
  "title": "2.2. FROM ile Tabloya Takma Ad (Alias) Verme",
  "explanation": "`AS` ifadesi, bir tabloya kÄ±sa bir takma ad vererek yazÄ±m kolaylÄ±ÄŸÄ± saÄŸlar. Genellikle JOIN iÅŸlemlerinde veya Ã§oklu tablo iÃ§eren sorgularda tercih edilir.",
  "example": "SELECT c.name FROM customers AS c; -- customers tablosu 'c' olarak kÄ±saltÄ±ldÄ±.",
  "question": "payments tablosuna 'p' takma adÄ± vererek `amount_paid` deÄŸerlerini listeleyen SQL sorgusunu yazÄ±n.",
  "answer": "SELECT p.amount_paid FROM payments AS p;",
  "output": "<table><tr><th>amount_paid</th></tr><tr><td>3000</td></tr></table>"
},
  {
  "title": "3.1. WHERE ile Basit Filtreleme",
  "explanation": "`WHERE` komutu, sadece belirli bir koÅŸulu saÄŸlayan satÄ±rlarÄ± seÃ§mek iÃ§in kullanÄ±lÄ±r. Ã–rneÄŸin, bir mÃ¼ÅŸterinin geliri belli bir deÄŸerin Ã¼zerindeyse sadece onu listeleyebilirsiniz.",
  "example": "SELECT name FROM customers WHERE income > 6000; -- Geliri 6000â€™den fazla olan mÃ¼ÅŸteriler gelir.",
  "question": "loans tablosunda durumu (status) 'unpaid' olan kredileri listeleyin.",
  "answer": "SELECT * FROM loans WHERE status = 'unpaid';",
  "output": "<table><tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr><tr><td>2</td><td>2</td><td>15000</td><td>unpaid</td></tr></table>"
},
    {
  "title": "3.2. WHERE ile Ã‡oklu KoÅŸullar: AND & OR",
  "explanation": "`AND` ifadesiyle birden fazla koÅŸul aynÄ± anda kontrol edilir. `OR` ile koÅŸullardan herhangi biri saÄŸlanÄ±yorsa satÄ±r seÃ§ilir.",
  "example": "SELECT name FROM customers WHERE income > 4000 AND city = 'Istanbul'; -- Geliri 4000'den fazla ve Ä°stanbul'da yaÅŸayanlar gelir.",
  "question": "credit_score'u 700â€™den bÃ¼yÃ¼k **veya** doÄŸum yÄ±lÄ± 1995 olan mÃ¼ÅŸterileri listeleyin.",
  "answer": "SELECT * FROM customers WHERE credit_score > 700 OR birth_year = 1995;",
  "output": "<table><tr><th>customer_id</th><th>name</th><th>income</th><th>credit_score</th><th>city</th><th>birth_year</th><th>marital_status</th><th>job_title</th></tr><tr><td>2</td><td>Ayse Demir</td><td>8000</td><td>720</td><td>Ankara</td><td>1990</td><td>single</td><td>Doctor</td></tr><tr><td>3</td><td>Can Kaya</td><td>3000</td><td>580</td><td>Izmir</td><td>1995</td><td>single</td><td>Student</td></tr></table>"
},
    {
  "title": "3.3. GeliÅŸmiÅŸ Filtreleme: BETWEEN, IN, NOT IN",
  "explanation": "`BETWEEN` ile iki deÄŸer arasÄ±nda kalan veriler alÄ±nÄ±r. `IN` ile birden fazla sabit deÄŸeri kapsayan filtreleme yapÄ±lÄ±r. `NOT IN` ile belirtilen deÄŸerler hariÃ§ tutulur.",
  "example": "SELECT name FROM customers WHERE birth_year BETWEEN 1985 AND 1990; -- 1985-1990 arasÄ± doÄŸanlarÄ± getirir.",
  "question": "loans tablosunda miktarÄ± (amount) 8000 veya 15000 olan kredileri listeleyin.",
  "answer": "SELECT * FROM loans WHERE amount IN (8000, 15000);",
  "output": "<table><tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr><tr><td>2</td><td>2</td><td>15000</td><td>unpaid</td></tr></table>"
},
    {
  "title": "3.4. BoÅŸ DeÄŸerleri Kontrol Etmek: IS NULL / IS NOT NULL",
  "explanation": "SQLâ€™de `NULL` boÅŸ veri demektir. Bu verileri filtrelemek iÃ§in `IS NULL` veya `IS NOT NULL` ifadeleri kullanÄ±lÄ±r.",
  "example": "SELECT * FROM customers WHERE job_title IS NOT NULL; -- job_title bilgisi olanlarÄ± getirir.",
  "question": "defaults tablosunda reason sÃ¼tunu boÅŸ olmayan kayÄ±tlarÄ± listeleyin.",
  "answer": "SELECT * FROM defaults WHERE reason IS NOT NULL;",
  "output": "<table><tr><th>default_id</th><th>customer_id</th><th>reason</th></tr><tr><td>1</td><td>2</td><td>missed payments</td></tr></table>"
},
    {
  "title": "4.1. Artan SÄ±ralama: ORDER BY ASC",
  "explanation": "`ORDER BY sÃ¼tun ASC` ifadesi, verileri o sÃ¼tuna gÃ¶re kÃ¼Ã§Ã¼kten bÃ¼yÃ¼ÄŸe sÄ±ralar. `ASC` yazÄ±lmasa bile varsayÄ±lan olarak zaten artan sÄ±ralama uygulanÄ±r.",
  "example": "SELECT name FROM customers ORDER BY credit_score ASC; -- Kredi skoruna gÃ¶re kÃ¼Ã§Ã¼kten bÃ¼yÃ¼ÄŸe sÄ±ralar.",
  "question": "payments tablosundaki Ã¶denen tutarlarÄ± artan ÅŸekilde sÄ±ralayarak listeleyin.",
  "answer": "SELECT * FROM payments ORDER BY amount_paid ASC;",
  "output": "<table><tr><th>payment_id</th><th>loan_id</th><th>amount_paid</th></tr><tr><td>1</td><td>1</td><td>3000</td></tr></table>"
},
    {
  "title": "4.2. Azalan SÄ±ralama: ORDER BY DESC",
  "explanation": "`ORDER BY sÃ¼tun DESC` ifadesi, verileri bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸe sÄ±ralar. Ã–zellikle en yÃ¼ksek geliri, en bÃ¼yÃ¼k kredi miktarÄ±nÄ± vb. listelemek iÃ§in kullanÄ±lÄ±r.",
  "example": "SELECT name FROM customers ORDER BY income DESC; -- En yÃ¼ksek gelir en Ã¼stte gelir.",
  "question": "loans tablosundaki kredi tutarlarÄ±nÄ± azalan ÅŸekilde sÄ±ralayÄ±n.",
  "answer": "SELECT * FROM loans ORDER BY amount DESC;",
  "output": "<table><tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr><tr><td>2</td><td>2</td><td>15000</td><td>unpaid</td></tr><tr><td>1</td><td>1</td><td>10000</td><td>paid</td></tr></table>"
},
    {
  "title": "4.3. Ã‡oklu SÄ±ralama: ORDER BY sÃ¼tun1, sÃ¼tun2",
  "explanation": "`ORDER BY sÃ¼tun1, sÃ¼tun2` ÅŸeklinde sÄ±ralama yapÄ±lÄ±rsa Ã¶nce birinci sÃ¼tuna gÃ¶re sÄ±ralanÄ±r, eÄŸer eÅŸitlik varsa ikinci sÃ¼tun dikkate alÄ±nÄ±r.",
  "example": "SELECT * FROM customers ORDER BY marital_status, income DESC; -- Ã–nce medeni duruma gÃ¶re, sonra gelire gÃ¶re sÄ±rala.",
  "question": "customers tablosunu ÅŸehir adÄ±na gÃ¶re artan, ardÄ±ndan doÄŸum yÄ±lÄ±na gÃ¶re azalan ÅŸekilde sÄ±ralayÄ±n.",
  "answer": "SELECT * FROM customers ORDER BY city ASC, birth_year DESC;",
  "output": "<table><tr><th>customer_id</th><th>name</th><th>income</th><th>credit_score</th><th>city</th><th>birth_year</th><th>marital_status</th><th>job_title</th></tr><tr><td>2</td><td>Ayse Demir</td><td>8000</td><td>720</td><td>Ankara</td><td>1990</td><td>single</td><td>Doctor</td></tr><tr><td>1</td><td>Ahmet Yilmaz</td><td>5000</td><td>650</td><td>Istanbul</td><td>1985</td><td>married</td><td>Engineer</td></tr><tr><td>3</td><td>Can Kaya</td><td>3000</td><td>580</td><td>Izmir</td><td>1995</td><td>single</td><td>Student</td></tr></table>"
},
{
  "title": "5.1. LIMIT ile Ä°lk n KayÄ±dÄ± Getirme",
  "explanation": "`LIMIT` komutu ile sadece belirli sayÄ±da kayÄ±t getirilebilir. Bu, genellikle verinin ilk kÄ±smÄ±na bakmak istediÄŸimizde kullanÄ±lÄ±r.",
  "example": "SELECT * FROM customers LIMIT 2; -- Ä°lk 2 mÃ¼ÅŸteri getirilir.",
  "question": "defaults tablosundaki yalnÄ±zca ilk kaydÄ± Ã§ekin.",
  "answer": "SELECT * FROM defaults LIMIT 1;",
  "output": "<table><tr><th>default_id</th><th>customer_id</th><th>reason</th></tr><tr><td>1</td><td>2</td><td>missed payments</td></tr></table>"
},
    {
  "title": "5.2. LIMIT ve ORDER BY ile En YÃ¼ksek DeÄŸerli Ä°lk KayÄ±t",
  "explanation": "`ORDER BY` ile veriler sÄ±ralanÄ±r, ardÄ±ndan `LIMIT` ile sadece ilk sonuÃ§lar getirilir. Bu, Ã¶rneÄŸin en yÃ¼ksek miktarlÄ± krediyi Ã§ekmek iÃ§in idealdir.",
  "example": "SELECT * FROM customers ORDER BY income DESC LIMIT 1; -- En yÃ¼ksek gelire sahip mÃ¼ÅŸteri getirilir.",
  "question": "loans tablosundaki en kÃ¼Ã§Ã¼k tutarlÄ± krediyi Ã§ekin.",
  "answer": "SELECT * FROM loans ORDER BY amount ASC LIMIT 1;",
  "output": "<table><tr><th>loan_id</th><th>customer_id</th><th>amount</th><th>status</th></tr><tr><td>1</td><td>1</td><td>10000</td><td>paid</td></tr></table>"
},
    {
  "title": "6.1. INNER JOIN ile Tablo BirleÅŸtirme",
  "explanation": "`INNER JOIN` ile iki tablo ortak bir sÃ¼tuna gÃ¶re birleÅŸtirilir ve sadece eÅŸleÅŸen satÄ±rlar alÄ±nÄ±r.",
  "example": "SELECT name, amount FROM customers JOIN loans ON customers.customer_id = loans.customer_id;",
  "question": "payment yapÄ±lan krediler iÃ§in mÃ¼ÅŸteri adÄ±nÄ± ve Ã¶deme tutarÄ±nÄ± gÃ¶sterin.",
  "answer": "SELECT name, amount_paid FROM customers JOIN loans ON customers.customer_id = loans.customer_id JOIN payments ON loans.loan_id = payments.loan_id;",
  "output": "<table><tr><th>name</th><th>amount_paid</th></tr><tr><td>Ahmet Yilmaz</td><td>3000</td></tr></table>"
},
    {
  "title": "6.2. LEFT JOIN ile EÅŸleÅŸmeyen Verileri Dahil Etme",
  "explanation": "`LEFT JOIN` ile birleÅŸtirme yapÄ±lÄ±rken sol tablodaki veriler her koÅŸulda alÄ±nÄ±r. SaÄŸdaki eÅŸleÅŸmeyen verilerde boÅŸ (`NULL`) gÃ¶rÃ¼nebilir.",
  "example": "SELECT name, reason FROM customers LEFT JOIN defaults ON customers.customer_id = defaults.customer_id;",
  "question": "defaults tablosundaki verileri, mÃ¼ÅŸterilerle birleÅŸtirerek gÃ¶sterin. EÅŸleÅŸmeyen mÃ¼ÅŸteri olursa da gÃ¶sterilsin.",
  "answer": "SELECT d.customer_id, name FROM defaults d LEFT JOIN customers c ON d.customer_id = c.customer_id;",
  "output": "<table><tr><th>customer_id</th><th>name</th></tr><tr><td>2</td><td>Ayse Demir</td></tr></table>"
},
    {
  "title": "6.3. JOIN KullanÄ±rken Alias (Takma Ad) KullanÄ±mÄ±",
  "explanation": "`AS` ile tablolara kÄ±sa takma adlar (alias) vererek okunabilirliÄŸi artÄ±rabiliriz. `c.name`, `l.amount` gibi yazmak daha kÄ±sa ve temiz olur.",
  "example": "SELECT c.name, l.amount FROM customers AS c JOIN loans AS l ON c.customer_id = l.customer_id;",
  "question": "alias kullanarak mÃ¼ÅŸteri adlarÄ± ve kredi durumunu listeleyin.",
  "answer": "SELECT c.name, l.status FROM customers AS c JOIN loans AS l ON c.customer_id = l.customer_id;",
  "output": "<table><tr><th>name</th><th>status</th></tr><tr><td>Ahmet Yilmaz</td><td>paid</td></tr><tr><td>Ayse Demir</td><td>unpaid</td></tr></table>"
}
],
  "orta": [
    {
      "title": "1. JOIN ile Tablo Birle\u015ftirme",
      "explanation": "`JOIN`, iki tabloyu ortak s\u00fctun \u00fczerinden birle\u015ftirmek i\u00e7in kullan\u0131l\u0131r. `INNER JOIN` yaln\u0131zca e\u015fle\u015fen kay\u0131tlar\u0131 getirir.",
      "example": "SELECT name, amount FROM customers JOIN loans ON customers.customer_id = loans.customer_id;",
      "question": "customers ve loans tablolar\u0131n\u0131 birle\u015ftirip m\u00fc\u015fteri adlar\u0131n\u0131 ve kredi miktarlar\u0131n\u0131 listeleyin.",
      "answer": "SELECT name, amount FROM customers JOIN loans ON customers.customer_id = loans.customer_id;",
      "output": "<table><tr><th>name</th><th>amount</th></tr><tr><td>Ahmet Yilmaz</td><td>10000</td></tr><tr><td>Ayse Demir</td><td>15000</td></tr></table>"
    },
    {
      "title": "2. GROUP BY ile Gruplama",
      "explanation": "`GROUP BY` ile belirli bir s\u00fctuna g\u00f6re verileri gruplayabiliriz. Genellikle COUNT, SUM gibi fonksiyonlarla birlikte kullan\u0131l\u0131r.",
      "example": "SELECT city, COUNT(*) FROM customers GROUP BY city;",
      "question": "Her \u015fehirde ka\u00e7 m\u00fc\u015fteri oldu\u011funu listeleyin.",
      "answer": "SELECT city, COUNT(*) FROM customers GROUP BY city;",
      "output": "<table><tr><th>city</th><th>COUNT(*)</th></tr><tr><td>Istanbul</td><td>1</td></tr><tr><td>Ankara</td><td>1</td></tr><tr><td>Izmir</td><td>1</td></tr></table>"
    },
    {
      "title": "3. IN, BETWEEN, LIKE ile Geli\u015fmi\u015f Filtreleme",
      "explanation": "`IN` belirli bir listede olanlar\u0131 se\u00e7er. `BETWEEN` iki de\u011fer aras\u0131 i\u00e7in kullan\u0131l\u0131r. `LIKE` benzer metinleri e\u015fle\u015ftirir.",
      "example": "SELECT * FROM customers WHERE name LIKE 'A%';",
      "question": "Ad\u0131 'A' harfiyle ba\u015flayan m\u00fc\u015fterileri listeleyin.",
      "answer": "SELECT name FROM customers WHERE name LIKE 'A%';",
      "output": "<table><tr><th>name</th></tr><tr><td>Ahmet Yilmaz</td></tr><tr><td>Ayse Demir</td></tr></table>"
    }
  ],
  "ileri": [
    {
      "title": "1. WINDOW FUNCTION - ROW_NUMBER",
      "explanation": "`ROW_NUMBER()` her sat\u0131ra s\u0131ral\u0131 bir numara verir. Genellikle bir s\u0131ralama \u00f6l\u00e7\u00fct\u00fc ile birlikte kullan\u0131l\u0131r.",
      "example": "SELECT name, ROW_NUMBER() OVER (ORDER BY income DESC) FROM customers;",
      "question": "Gelire g\u00f6re azalan s\u0131ralamada her m\u00fc\u015fteriye s\u0131ra numaras\u0131 verin.",
      "answer": "SELECT name, ROW_NUMBER() OVER (ORDER BY income DESC) FROM customers;",
      "output": "<table><tr><th>name</th><th>row_number</th></tr><tr><td>Ayse Demir</td><td>1</td></tr><tr><td>Ahmet Yilmaz</td><td>2</td></tr><tr><td>Can Kaya</td><td>3</td></tr></table>"
    },
    {
      "title": "2. EXISTS ile Alt Sorgular",
      "explanation": "`EXISTS`, alt sorguda en az bir kay\u0131t varsa `TRUE` d\u00f6ner. Belirli bir ko\u015fula ba\u011fl\u0131 kontrol sa\u011flar.",
      "example": "SELECT name FROM customers WHERE EXISTS (SELECT * FROM loans WHERE customers.customer_id = loans.customer_id);",
      "question": "Herhangi bir kredisi olan m\u00fc\u015fterileri listeleyin.",
      "answer": "SELECT name FROM customers WHERE EXISTS (SELECT * FROM loans WHERE customers.customer_id = loans.customer_id);",
      "output": "<table><tr><th>name</th></tr><tr><td>Ahmet Yilmaz</td></tr><tr><td>Ayse Demir</td></tr></table>"
    },
    {
      "title": "3. CTE - Ge\u00e7ici Tablo (WITH)",
      "explanation": "`WITH` ifadesi, ge\u00e7ici bir adland\u0131r\u0131lm\u0131\u015f tablo olu\u015fturarak okunabilirli\u011fi art\u0131r\u0131r. Karma\u015f\u0131k sorgular bu \u015fekilde sadele\u015fir.",
      "example": "WITH high_income AS (SELECT * FROM customers WHERE income > 6000) SELECT name FROM high_income;",
      "question": "Geliri 6000'den y\u00fcksek olanlar\u0131 WITH ifadesiyle se\u00e7ip sadece adlar\u0131n\u0131 listeleyin.",
      "answer": "WITH high_income AS (SELECT * FROM customers WHERE income > 6000) SELECT name FROM high_income;",
      "output": "<table><tr><th>name</th></tr><tr><td>Ayse Demir</td></tr></table>"
    }
  ]
};

let score = 0;

function loadLevel(level, buttonEl = null) {
  const qDiv = document.getElementById("questions");
  qDiv.innerHTML = "";
  score = 0;
  document.getElementById("score").innerText = score;

  // Aktif butonu vurgula
  const allButtons = document.querySelectorAll('.level-buttons button');
  allButtons.forEach(btn => btn.classList.remove('active'));
  if (buttonEl) buttonEl.classList.add('active');

  const questions = allQuestions[level];

  questions.forEach((q, i) => {
    const container = document.createElement("div");
    container.innerHTML = `
      <h3>${q.title}</h3>
      <p><strong>Konu:</strong> ${q.explanation}</p>
      <p><strong>Ã–rnek:</strong></p>
      <pre class="code-block">${q.example}</pre>
      <p><strong>Soru:</strong> ${q.question}</p>
      <textarea id="answer-${i}"></textarea>
      <button class="check" onclick="checkAnswer('${level}', ${i})">CevabÄ± Kontrol Et</button>
      <span id="result-${i}"></span>
      <div id="output-${i}"></div>
      <hr>
    `;
    qDiv.appendChild(container);
  });
}


async function checkAnswer(level, i) {
  const input = document.getElementById(`answer-${i}`).value.trim();
  const correct = allQuestions[level][i].answer.trim();

  const resultSpan = document.getElementById(`result-${i}`);
  const outputDiv = document.getElementById(`output-${i}`);

  // GPT APIâ€™ye POST isteÄŸi gÃ¶nder
  const res = await fetch('/api/check-sql', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ user_sql: input, correct_sql: correct })
  });

  const data = await res.json();

  if (data.result.includes("DOÄRU")) {
    resultSpan.innerText = 'âœ”ï¸';
    resultSpan.className = 'correct';
    outputDiv.innerHTML = `<p><strong>âœ”ï¸ DoÄŸru! Beklenen SonuÃ§:</strong></p>${allQuestions[level][i].output}`;
    score++;
    document.getElementById("score").innerText = score;
  } else {
    resultSpan.innerText = 'âŒ';
    resultSpan.className = 'wrong';
    outputDiv.innerHTML = '';
  }
}

function toggleTheme() {
  document.body.classList.toggle("dark");
}

window.onload = () => loadLevel('temel');
</script>
</body>
</html>

